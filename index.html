<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>CCR Compliance Review Checklist - Sign In</title>
  <style>
      * {
          margin: 0;
          padding: 0;
          box-sizing: border-box;
      }

      body {
          font-family: 'Google Sans', Roboto, Arial, sans-serif;
          background-color: #f0ebf8;
          padding: 20px;
      }

      .form-container {
          max-width: 770px;
          margin: 0 auto;
      }

      .form-header {
          background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
          border-radius: 8px 8px 0 0;
          padding: 32px 24px;
          color: white;
          margin-bottom: 12px;
      }

      .form-title {
          font-size: 32px;
          font-weight: 400;
          margin-bottom: 8px;
          line-height: 1.2;
      }

      .form-description {
          font-size: 14px;
          opacity: 0.9;
          margin-top: 12px;
      }

      .form-section {
          background: white;
          border-radius: 8px;
          padding: 24px;
          margin-bottom: 12px;
          box-shadow: 0 1px 3px rgba(0,0,0,0.12);
      }

      .question {
          margin-bottom: 24px;
      }

      .question:last-child {
          margin-bottom: 0;
      }

      .question-label {
          font-size: 16px;
          font-weight: 400;
          color: #202124;
          margin-bottom: 12px;
          display: block;
      }

      .required {
          color: #d93025;
          margin-left: 4px;
      }

      .section-title {
          font-size: 18px;
          font-weight: 500;
          color: #5f6368;
          margin-bottom: 16px;
          padding-bottom: 8px;
          border-bottom: 2px solid #f1f3f4;
          text-transform: uppercase;
          letter-spacing: 0.5px;
      }

      input[type="text"],
      input[type="email"],
      input[type="password"],
      input[type="date"],
      textarea {
          width: 100%;
          padding: 12px;
          border: none;
          border-bottom: 1px solid #dadce0;
          font-size: 14px;
          font-family: inherit;
          transition: border-bottom-color 0.2s;
          background: transparent;
      }

      input[type="text"]:focus,
      input[type="email"]:focus,
      input[type="password"]:focus,
      input[type="date"]:focus,
      textarea:focus {
          outline: none;
          border-bottom-color: #673ab7;
          border-bottom-width: 2px;
      }

      textarea {
          resize: vertical;
          min-height: 100px;
          border: 1px solid #dadce0;
          border-radius: 4px;
          padding: 12px;
      }

      textarea:focus {
          border: 2px solid #673ab7;
      }

      .radio-group {
          display: flex;
          flex-direction: row;
          gap: 24px;
          flex-wrap: wrap;
      }

      .radio-option {
          display: flex;
          align-items: center;
          cursor: pointer;
          position: relative;
      }

      .radio-option input[type="radio"] {
          appearance: none;
          width: 20px;
          height: 20px;
          border: 2px solid #5f6368;
          border-radius: 50%;
          margin-right: 8px;
          cursor: pointer;
          position: relative;
          transition: all 0.2s;
      }

      .radio-option input[type="radio"]:checked {
          border-color: #673ab7;
      }

      .radio-option input[type="radio"]:checked::after {
          content: '';
          position: absolute;
          top: 50%;
          left: 50%;
          transform: translate(-50%, -50%);
          width: 10px;
          height: 10px;
          border-radius: 50%;
          background: #673ab7;
      }

      .radio-option label {
          font-size: 14px;
          color: #202124;
          cursor: pointer;
      }

      .submit-btn, .auth-btn {
          background: #673ab7;
          color: white;
          border: none;
          padding: 12px 24px;
          font-size: 14px;
          font-weight: 500;
          border-radius: 4px;
          cursor: pointer;
          transition: background 0.2s;
          text-transform: uppercase;
          letter-spacing: 0.5px;
          width: 100%;
          margin-bottom: 12px;
      }

      .submit-btn:hover, .auth-btn:hover {
          background: #5e35b1;
      }

      .submit-btn:disabled, .auth-btn:disabled {
          background: #ccc;
          cursor: not-allowed;
      }

      .google-btn {
          background: white;
          color: #202124;
          border: 1px solid #dadce0;
      }

      .google-btn:hover {
          background: #f8f9fa;
      }

      .item-label {
          font-size: 14px;
          color: #202124;
          margin-bottom: 8px;
          font-weight: 400;
      }

      .success-message {
          background: #4caf50;
          color: white;
          padding: 16px;
          border-radius: 8px;
          margin-bottom: 12px;
          text-align: center;
          display: none;
      }

      .error-message {
          background: #f44336;
          color: white;
          padding: 16px;
          border-radius: 8px;
          margin-bottom: 12px;
          text-align: center;
          display: none;
      }

      .info-message {
          background: #2196F3;
          color: white;
          padding: 16px;
          border-radius: 8px;
          margin-bottom: 12px;
          text-align: center;
      }

      #authContainer {
          display: block;
      }

      #formContainer {
          display: none;
      }

      .user-info {
          background: white;
          border-radius: 8px;
          padding: 16px 24px;
          margin-bottom: 12px;
          box-shadow: 0 1px 3px rgba(0,0,0,0.12);
          display: flex;
          justify-content: space-between;
          align-items: center;
      }

      .user-email {
          font-size: 14px;
          color: #5f6368;
      }

      .signout-btn {
          background: transparent;
          color: #673ab7;
          border: 1px solid #673ab7;
          padding: 8px 16px;
          font-size: 12px;
          font-weight: 500;
          border-radius: 4px;
          cursor: pointer;
          transition: all 0.2s;
          text-transform: uppercase;
          letter-spacing: 0.5px;
      }

      .signout-btn:hover {
          background: #673ab7;
          color: white;
      }

      .auth-divider {
          text-align: center;
          margin: 20px 0;
          position: relative;
      }

      .auth-divider::before {
          content: '';
          position: absolute;
          top: 50%;
          left: 0;
          right: 0;
          height: 1px;
          background: #dadce0;
      }

      .auth-divider span {
          background: white;
          padding: 0 16px;
          position: relative;
          color: #5f6368;
          font-size: 14px;
      }

      /* Image Upload Styles */
      .file-upload-area {
          border: 2px dashed #dadce0;
          border-radius: 8px;
          padding: 24px;
          text-align: center;
          transition: all 0.2s;
          cursor: pointer;
          background: #fafafa;
      }

      .file-upload-area:hover {
          border-color: #673ab7;
          background: #f5f3f7;
      }

      .file-upload-area.dragover {
          border-color: #673ab7;
          background: #ede7f6;
      }

      .file-upload-icon {
          font-size: 48px;
          color: #9e9e9e;
          margin-bottom: 12px;
      }

      .file-upload-text {
          font-size: 14px;
          color: #5f6368;
          margin-bottom: 8px;
      }

      .file-upload-hint {
          font-size: 12px;
          color: #9e9e9e;
      }

      input[type="file"] {
          display: none;
      }

      .image-preview-container {
          display: grid;
          grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
          gap: 12px;
          margin-top: 16px;
      }

      .image-preview {
          position: relative;
          border-radius: 8px;
          overflow: hidden;
          box-shadow: 0 2px 4px rgba(0,0,0,0.1);
      }

      .image-preview img {
          width: 100%;
          height: 150px;
          object-fit: cover;
          display: block;
      }

      .image-preview-remove {
          position: absolute;
          top: 8px;
          right: 8px;
          background: rgba(244, 67, 54, 0.9);
          color: white;
          border: none;
          border-radius: 50%;
          width: 28px;
          height: 28px;
          font-size: 16px;
          cursor: pointer;
          display: flex;
          align-items: center;
          justify-content: center;
          transition: background 0.2s;
      }

      .image-preview-remove:hover {
          background: rgba(244, 67, 54, 1);
      }

      .upload-progress {
          margin-top: 16px;
          padding: 12px;
          background: #e3f2fd;
          border-radius: 8px;
          display: none;
      }

      .upload-progress-text {
          font-size: 14px;
          color: #1976d2;
          margin-bottom: 8px;
      }

      .upload-progress-bar {
          width: 100%;
          height: 8px;
          background: #bbdefb;
          border-radius: 4px;
          overflow: hidden;
      }

      .upload-progress-fill {
          height: 100%;
          background: #2196F3;
          width: 0%;
          transition: width 0.3s;
      }
  </style>
</head>
<body>
<div class="form-container">
  <div class="success-message" id="successMessage">
    Form submitted successfully! The form has been reset.
  </div>

  <div class="error-message" id="errorMessage">
    Error submitting form. Please try again.
  </div>

  <div class="form-header">
    <h1 class="form-title">Sunrise Territory Village<br>CCR Compliance Review Checklist</h1>
    <p class="form-description">Board of Directors Property Compliance Review<br>Check appropriate box for each item. Add comments in the designated areas.</p>
  </div>

  <!-- Authentication Container -->
  <div id="authContainer">
    <div class="form-section">
      <h2 class="section-title">Sign In Required</h2>
      <div class="info-message">
        This form is restricted to authorized review team members only. Please sign in to continue.
      </div>

      <div class="question">
        <label class="question-label">Email</label>
        <input type="email" id="signInEmail" placeholder="your.email@example.com">
      </div>

      <div class="question">
        <label class="question-label">Password</label>
        <input type="password" id="signInPassword" placeholder="Enter your password">
      </div>

      <button class="auth-btn" id="signInBtn">Sign In</button>

      <div class="auth-divider">
        <span>OR</span>
      </div>

      <button class="auth-btn google-btn" id="googleSignInBtn">
        <svg width="18" height="18" style="vertical-align: middle; margin-right: 8px;" viewBox="0 0 24 24">
          <path fill="#4285F4" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"/>
          <path fill="#34A853" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"/>
          <path fill="#FBBC05" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"/>
          <path fill="#EA4335" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"/>
        </svg>
        Sign in with Google
      </button>

      <p style="text-align: center; margin-top: 16px; color: #5f6368; font-size: 12px;">
        Don't have an account? Contact the Board Administrator to get access.
      </p>
    </div>
  </div>

  <!-- Main Form Container (Hidden until authenticated) -->
  <div id="formContainer">
    <div class="user-info" id="userInfo">
      <span class="user-email" id="userEmail"></span>
      <button class="signout-btn" id="signOutBtn">Sign Out</button>
    </div>

    <form id="complianceForm">
      <!-- Basic Information Section -->
      <div class="form-section">
        <div class="question">
          <label class="question-label">Date<span class="required">*</span></label>
          <input type="date" name="date" required>
        </div>

        <div class="question">
          <label class="question-label">Review Team<span class="required">*</span></label>
          <input type="text" name="reviewTeam" placeholder="Enter reviewer names" required>
        </div>

        <div class="question">
          <label class="question-label">Property Address<span class="required">*</span></label>
          <input type="text" name="propertyAddress" placeholder="Enter property address" required>
        </div>
      </div>

      <!-- Photo Upload Section -->
      <div class="form-section">
        <h2 class="section-title">Property Photos</h2>
        <div class="question">
          <label class="question-label">Upload Photos (Optional)</label>
          <p class="file-upload-hint" style="margin-bottom: 12px;">Add photos to document violations or property condition</p>

          <div class="file-upload-area" id="fileUploadArea">
            <div class="file-upload-icon">📷</div>
            <div class="file-upload-text">Click to upload or drag and drop</div>
            <div class="file-upload-hint">PNG, JPG, HEIC up to 10MB each (Max 10 photos)</div>
          </div>

          <input type="file" id="fileInput" accept="image/*" multiple>

          <div class="image-preview-container" id="imagePreviewContainer"></div>

          <div class="upload-progress" id="uploadProgress">
            <div class="upload-progress-text" id="uploadProgressText">Uploading images...</div>
            <div class="upload-progress-bar">
              <div class="upload-progress-fill" id="uploadProgressFill"></div>
            </div>
          </div>
        </div>
      </div>

      <!-- Overall Property Appearance -->
      <div class="form-section">
        <h2 class="section-title">Overall Property Appearance</h2>

        <div class="question">
          <div class="item-label">General appearance and curb appeal</div>
          <div class="radio-group">
            <div class="radio-option">
              <input type="radio" id="overall-accept" name="overallAppearance" value="accept">
              <label for="overall-accept">Accept</label>
            </div>
            <div class="radio-option">
              <input type="radio" id="overall-minor" name="overallAppearance" value="minor">
              <label for="overall-minor">Minor</label>
            </div>
            <div class="radio-option">
              <input type="radio" id="overall-major" name="overallAppearance" value="major">
              <label for="overall-major">Major</label>
            </div>
            <div class="radio-option">
              <input type="radio" id="overall-na" name="overallAppearance" value="na">
              <label for="overall-na">N/A</label>
            </div>
          </div>
        </div>
      </div>

      <!-- Exterior Structures -->
      <div class="form-section">
        <h2 class="section-title">Exterior Structures</h2>

        <div class="question">
          <div class="item-label">Paint and/or stucco condition</div>
          <div class="radio-group">
            <div class="radio-option">
              <input type="radio" id="paint-accept" name="paintStucco" value="accept">
              <label for="paint-accept">Accept</label>
            </div>
            <div class="radio-option">
              <input type="radio" id="paint-minor" name="paintStucco" value="minor">
              <label for="paint-minor">Minor</label>
            </div>
            <div class="radio-option">
              <input type="radio" id="paint-major" name="paintStucco" value="major">
              <label for="paint-major">Major</label>
            </div>
            <div class="radio-option">
              <input type="radio" id="paint-na" name="paintStucco" value="na">
              <label for="paint-na">N/A</label>
            </div>
          </div>
        </div>

        <div class="question">
          <div class="item-label">Tile roof condition</div>
          <div class="radio-group">
            <div class="radio-option">
              <input type="radio" id="roof-accept" name="tileRoof" value="accept">
              <label for="roof-accept">Accept</label>
            </div>
            <div class="radio-option">
              <input type="radio" id="roof-minor" name="tileRoof" value="minor">
              <label for="roof-minor">Minor</label>
            </div>
            <div class="radio-option">
              <input type="radio" id="roof-major" name="tileRoof" value="major">
              <label for="roof-major">Major</label>
            </div>
            <div class="radio-option">
              <input type="radio" id="roof-na" name="tileRoof" value="na">
              <label for="roof-na">N/A</label>
            </div>
          </div>
        </div>

        <div class="question">
          <div class="item-label">Gutters and downspouts</div>
          <div class="radio-group">
            <div class="radio-option">
              <input type="radio" id="gutters-accept" name="gutters" value="accept">
              <label for="gutters-accept">Accept</label>
            </div>
            <div class="radio-option">
              <input type="radio" id="gutters-minor" name="gutters" value="minor">
              <label for="gutters-minor">Minor</label>
            </div>
            <div class="radio-option">
              <input type="radio" id="gutters-major" name="gutters" value="major">
              <label for="gutters-major">Major</label>
            </div>
            <div class="radio-option">
              <input type="radio" id="gutters-na" name="gutters" value="na">
              <label for="gutters-na">N/A</label>
            </div>
          </div>
        </div>

        <div class="question">
          <div class="item-label">Windows and screens</div>
          <div class="radio-group">
            <div class="radio-option">
              <input type="radio" id="windows-accept" name="windows" value="accept">
              <label for="windows-accept">Accept</label>
            </div>
            <div class="radio-option">
              <input type="radio" id="windows-minor" name="windows" value="minor">
              <label for="windows-minor">Minor</label>
            </div>
            <div class="radio-option">
              <input type="radio" id="windows-major" name="windows" value="major">
              <label for="windows-major">Major</label>
            </div>
            <div class="radio-option">
              <input type="radio" id="windows-na" name="windows" value="na">
              <label for="windows-na">N/A</label>
            </div>
          </div>
        </div>

        <div class="question">
          <div class="item-label">Doors and garage doors</div>
          <div class="radio-group">
            <div class="radio-option">
              <input type="radio" id="doors-accept" name="doors" value="accept">
              <label for="doors-accept">Accept</label>
            </div>
            <div class="radio-option">
              <input type="radio" id="doors-minor" name="doors" value="minor">
              <label for="doors-minor">Minor</label>
            </div>
            <div class="radio-option">
              <input type="radio" id="doors-major" name="doors" value="major">
              <label for="doors-major">Major</label>
            </div>
            <div class="radio-option">
              <input type="radio" id="doors-na" name="doors" value="na">
              <label for="doors-na">N/A</label>
            </div>
          </div>
        </div>

        <div class="question">
          <div class="item-label">Fencing condition and appearance</div>
          <div class="radio-group">
            <div class="radio-option">
              <input type="radio" id="fencing-accept" name="fencing" value="accept">
              <label for="fencing-accept">Accept</label>
            </div>
            <div class="radio-option">
              <input type="radio" id="fencing-minor" name="fencing" value="minor">
              <label for="fencing-minor">Minor</label>
            </div>
            <div class="radio-option">
              <input type="radio" id="fencing-major" name="fencing" value="major">
              <label for="fencing-major">Major</label>
            </div>
            <div class="radio-option">
              <input type="radio" id="fencing-na" name="fencing" value="na">
              <label for="fencing-na">N/A</label>
            </div>
          </div>
        </div>
      </div>

      <!-- Hardscape -->
      <div class="form-section">
        <h2 class="section-title">Hardscape</h2>

        <div class="question">
          <div class="item-label">Driveway condition (cracks, stains, etc.)</div>
          <div class="radio-group">
            <div class="radio-option">
              <input type="radio" id="driveway-accept" name="driveway" value="accept">
              <label for="driveway-accept">Accept</label>
            </div>
            <div class="radio-option">
              <input type="radio" id="driveway-minor" name="driveway" value="minor">
              <label for="driveway-minor">Minor</label>
            </div>
            <div class="radio-option">
              <input type="radio" id="driveway-major" name="driveway" value="major">
              <label for="driveway-major">Major</label>
            </div>
            <div class="radio-option">
              <input type="radio" id="driveway-na" name="driveway" value="na">
              <label for="driveway-na">N/A</label>
            </div>
          </div>
        </div>

        <div class="question">
          <div class="item-label">Walkways and patios</div>
          <div class="radio-group">
            <div class="radio-option">
              <input type="radio" id="walkways-accept" name="walkways" value="accept">
              <label for="walkways-accept">Accept</label>
            </div>
            <div class="radio-option">
              <input type="radio" id="walkways-minor" name="walkways" value="minor">
              <label for="walkways-minor">Minor</label>
            </div>
            <div class="radio-option">
              <input type="radio" id="walkways-major" name="walkways" value="major">
              <label for="walkways-major">Major</label>
            </div>
            <div class="radio-option">
              <input type="radio" id="walkways-na" name="walkways" value="na">
              <label for="walkways-na">N/A</label>
            </div>
          </div>
        </div>
      </div>

      <!-- Landscaping -->
      <div class="form-section">
        <h2 class="section-title">Landscaping</h2>

        <div class="question">
          <div class="item-label">Overall landscaping condition</div>
          <div class="radio-group">
            <div class="radio-option">
              <input type="radio" id="landscape-overall-accept" name="landscapeOverall" value="accept">
              <label for="landscape-overall-accept">Accept</label>
            </div>
            <div class="radio-option">
              <input type="radio" id="landscape-overall-minor" name="landscapeOverall" value="minor">
              <label for="landscape-overall-minor">Minor</label>
            </div>
            <div class="radio-option">
              <input type="radio" id="landscape-overall-major" name="landscapeOverall" value="major">
              <label for="landscape-overall-major">Major</label>
            </div>
            <div class="radio-option">
              <input type="radio" id="landscape-overall-na" name="landscapeOverall" value="na">
              <label for="landscape-overall-na">N/A</label>
            </div>
          </div>
        </div>

        <div class="question">
          <div class="item-label">Ground cover/xeriscape maintained</div>
          <div class="radio-group">
            <div class="radio-option">
              <input type="radio" id="ground-cover-accept" name="groundCover" value="accept">
              <label for="ground-cover-accept">Accept</label>
            </div>
            <div class="radio-option">
              <input type="radio" id="ground-cover-minor" name="groundCover" value="minor">
              <label for="ground-cover-minor">Minor</label>
            </div>
            <div class="radio-option">
              <input type="radio" id="ground-cover-major" name="groundCover" value="major">
              <label for="ground-cover-major">Major</label>
            </div>
            <div class="radio-option">
              <input type="radio" id="ground-cover-na" name="groundCover" value="na">
              <label for="ground-cover-na">N/A</label>
            </div>
          </div>
        </div>

        <div class="question">
          <div class="item-label">Trees and shrubs (trimmed, healthy)</div>
          <div class="radio-group">
            <div class="radio-option">
              <input type="radio" id="trees-shrubs-accept" name="treesShrubs" value="accept">
              <label for="trees-shrubs-accept">Accept</label>
            </div>
            <div class="radio-option">
              <input type="radio" id="trees-shrubs-minor" name="treesShrubs" value="minor">
              <label for="trees-shrubs-minor">Minor</label>
            </div>
            <div class="radio-option">
              <input type="radio" id="trees-shrubs-major" name="treesShrubs" value="major">
              <label for="trees-shrubs-major">Major</label>
            </div>
            <div class="radio-option">
              <input type="radio" id="trees-shrubs-na" name="treesShrubs" value="na">
              <label for="trees-shrubs-na">N/A</label>
            </div>
          </div>
        </div>

        <div class="question">
          <div class="item-label">Dead/dying trees, shrubs, cacti, succulents</div>
          <div class="radio-group">
            <div class="radio-option">
              <input type="radio" id="dead-plants-accept" name="deadPlants" value="accept">
              <label for="dead-plants-accept">Accept</label>
            </div>
            <div class="radio-option">
              <input type="radio" id="dead-plants-minor" name="deadPlants" value="minor">
              <label for="dead-plants-minor">Minor</label>
            </div>
            <div class="radio-option">
              <input type="radio" id="dead-plants-major" name="deadPlants" value="major">
              <label for="dead-plants-major">Major</label>
            </div>
            <div class="radio-option">
              <input type="radio" id="dead-plants-na" name="deadPlants" value="na">
              <label for="dead-plants-na">N/A</label>
            </div>
          </div>
        </div>

        <div class="question">
          <div class="item-label">Mistletoe present in trees</div>
          <div class="radio-group">
            <div class="radio-option">
              <input type="radio" id="mistletoe-accept" name="mistletoe" value="accept">
              <label for="mistletoe-accept">Accept</label>
            </div>
            <div class="radio-option">
              <input type="radio" id="mistletoe-minor" name="mistletoe" value="minor">
              <label for="mistletoe-minor">Minor</label>
            </div>
            <div class="radio-option">
              <input type="radio" id="mistletoe-major" name="mistletoe" value="major">
              <label for="mistletoe-major">Major</label>
            </div>
            <div class="radio-option">
              <input type="radio" id="mistletoe-na" name="mistletoe" value="na">
              <label for="mistletoe-na">N/A</label>
            </div>
          </div>
        </div>

        <div class="question">
          <div class="item-label">Landscape rocks/gravel maintained</div>
          <div class="radio-group">
            <div class="radio-option">
              <input type="radio" id="rocks-accept" name="rocksGravel" value="accept">
              <label for="rocks-accept">Accept</label>
            </div>
            <div class="radio-option">
              <input type="radio" id="rocks-minor" name="rocksGravel" value="minor">
              <label for="rocks-minor">Minor</label>
            </div>
            <div class="radio-option">
              <input type="radio" id="rocks-major" name="rocksGravel" value="major">
              <label for="rocks-major">Major</label>
            </div>
            <div class="radio-option">
              <input type="radio" id="rocks-na" name="rocksGravel" value="na">
              <label for="rocks-na">N/A</label>
            </div>
          </div>
        </div>
      </div>

      <!-- Fixtures & Amenities -->
      <div class="form-section">
        <h2 class="section-title">Fixtures & Amenities</h2>

        <div class="question">
          <div class="item-label">Mailbox condition</div>
          <div class="radio-group">
            <div class="radio-option">
              <input type="radio" id="mailbox-accept" name="mailbox" value="accept">
              <label for="mailbox-accept">Accept</label>
            </div>
            <div class="radio-option">
              <input type="radio" id="mailbox-minor" name="mailbox" value="minor">
              <label for="mailbox-minor">Minor</label>
            </div>
            <div class="radio-option">
              <input type="radio" id="mailbox-major" name="mailbox" value="major">
              <label for="mailbox-major">Major</label>
            </div>
            <div class="radio-option">
              <input type="radio" id="mailbox-na" name="mailbox" value="na">
              <label for="mailbox-na">N/A</label>
            </div>
          </div>
        </div>

        <div class="question">
          <div class="item-label">Lamppost condition</div>
          <div class="radio-group">
            <div class="radio-option">
              <input type="radio" id="lamppost-accept" name="lamppost" value="accept">
              <label for="lamppost-accept">Accept</label>
            </div>
            <div class="radio-option">
              <input type="radio" id="lamppost-minor" name="lamppost" value="minor">
              <label for="lamppost-minor">Minor</label>
            </div>
            <div class="radio-option">
              <input type="radio" id="lamppost-major" name="lamppost" value="major">
              <label for="lamppost-major">Major</label>
            </div>
            <div class="radio-option">
              <input type="radio" id="lamppost-na" name="lamppost" value="na">
              <label for="lamppost-na">N/A</label>
            </div>
          </div>
        </div>

        <div class="question">
          <div class="item-label">House numbers visible/condition</div>
          <div class="radio-group">
            <div class="radio-option">
              <input type="radio" id="house-numbers-accept" name="houseNumbers" value="accept">
              <label for="house-numbers-accept">Accept</label>
            </div>
            <div class="radio-option">
              <input type="radio" id="house-numbers-minor" name="houseNumbers" value="minor">
              <label for="house-numbers-minor">Minor</label>
            </div>
            <div class="radio-option">
              <input type="radio" id="house-numbers-major" name="houseNumbers" value="major">
              <label for="house-numbers-major">Major</label>
            </div>
            <div class="radio-option">
              <input type="radio" id="house-numbers-na" name="houseNumbers" value="na">
              <label for="house-numbers-na">N/A</label>
            </div>
          </div>
        </div>

        <div class="question">
          <div class="item-label">Exterior lighting functional</div>
          <div class="radio-group">
            <div class="radio-option">
              <input type="radio" id="lighting-accept" name="exteriorLighting" value="accept">
              <label for="lighting-accept">Accept</label>
            </div>
            <div class="radio-option">
              <input type="radio" id="lighting-minor" name="exteriorLighting" value="minor">
              <label for="lighting-minor">Minor</label>
            </div>
            <div class="radio-option">
              <input type="radio" id="lighting-major" name="exteriorLighting" value="major">
              <label for="lighting-major">Major</label>
            </div>
            <div class="radio-option">
              <input type="radio" id="lighting-na" name="exteriorLighting" value="na">
              <label for="lighting-na">N/A</label>
            </div>
          </div>
        </div>
      </div>

      <!-- Storage & Cleanliness -->
      <div class="form-section">
        <h2 class="section-title">Storage & Cleanliness</h2>

        <div class="question">
          <div class="item-label">No visible trash/debris</div>
          <div class="radio-group">
            <div class="radio-option">
              <input type="radio" id="trash-accept" name="trashDebris" value="accept">
              <label for="trash-accept">Accept</label>
            </div>
            <div class="radio-option">
              <input type="radio" id="trash-minor" name="trashDebris" value="minor">
              <label for="trash-minor">Minor</label>
            </div>
            <div class="radio-option">
              <input type="radio" id="trash-major" name="trashDebris" value="major">
              <label for="trash-major">Major</label>
            </div>
            <div class="radio-option">
              <input type="radio" id="trash-na" name="trashDebris" value="na">
              <label for="trash-na">N/A</label>
            </div>
          </div>
        </div>

        <div class="question">
          <div class="item-label">Trash cans properly stored</div>
          <div class="radio-group">
            <div class="radio-option">
              <input type="radio" id="trash-cans-accept" name="trashCans" value="accept">
              <label for="trash-cans-accept">Accept</label>
            </div>
            <div class="radio-option">
              <input type="radio" id="trash-cans-minor" name="trashCans" value="minor">
              <label for="trash-cans-minor">Minor</label>
            </div>
            <div class="radio-option">
              <input type="radio" id="trash-cans-major" name="trashCans" value="major">
              <label for="trash-cans-major">Major</label>
            </div>
            <div class="radio-option">
              <input type="radio" id="trash-cans-na" name="trashCans" value="na">
              <label for="trash-cans-na">N/A</label>
            </div>
          </div>
        </div>

        <div class="question">
          <div class="item-label">No unauthorized structures/storage</div>
          <div class="radio-group">
            <div class="radio-option">
              <input type="radio" id="structures-accept" name="unauthorizedStructures" value="accept">
              <label for="structures-accept">Accept</label>
            </div>
            <div class="radio-option">
              <input type="radio" id="structures-minor" name="unauthorizedStructures" value="minor">
              <label for="structures-minor">Minor</label>
            </div>
            <div class="radio-option">
              <input type="radio" id="structures-major" name="unauthorizedStructures" value="major">
              <label for="structures-major">Major</label>
            </div>
            <div class="radio-option">
              <input type="radio" id="structures-na" name="unauthorizedStructures" value="na">
              <label for="structures-na">N/A</label>
            </div>
          </div>
        </div>
      </div>

      <!-- Vehicles & Parking -->
      <div class="form-section">
        <h2 class="section-title">Vehicles & Parking</h2>

        <div class="question">
          <div class="item-label">No inoperable vehicles visible</div>
          <div class="radio-group">
            <div class="radio-option">
              <input type="radio" id="inoperable-accept" name="inoperableVehicles" value="accept">
              <label for="inoperable-accept">Accept</label>
            </div>
            <div class="radio-option">
              <input type="radio" id="inoperable-minor" name="inoperableVehicles" value="minor">
              <label for="inoperable-minor">Minor</label>
            </div>
            <div class="radio-option">
              <input type="radio" id="inoperable-major" name="inoperableVehicles" value="major">
              <label for="inoperable-major">Major</label>
            </div>
            <div class="radio-option">
              <input type="radio" id="inoperable-na" name="inoperableVehicles" value="na">
              <label for="inoperable-na">N/A</label>
            </div>
          </div>
        </div>

        <div class="question">
          <div class="item-label">No commercial vehicles/trailers/RVs</div>
          <div class="radio-group">
            <div class="radio-option">
              <input type="radio" id="commercial-accept" name="commercialVehicles" value="accept">
              <label for="commercial-accept">Accept</label>
            </div>
            <div class="radio-option">
              <input type="radio" id="commercial-minor" name="commercialVehicles" value="minor">
              <label for="commercial-minor">Minor</label>
            </div>
            <div class="radio-option">
              <input type="radio" id="commercial-major" name="commercialVehicles" value="major">
              <label for="commercial-major">Major</label>
            </div>
            <div class="radio-option">
              <input type="radio" id="commercial-na" name="commercialVehicles" value="na">
              <label for="commercial-na">N/A</label>
            </div>
          </div>
        </div>

        <div class="question">
          <div class="item-label">Vehicles parked in approved areas</div>
          <div class="radio-group">
            <div class="radio-option">
              <input type="radio" id="parking-accept" name="approvedParking" value="accept">
              <label for="parking-accept">Accept</label>
            </div>
            <div class="radio-option">
              <input type="radio" id="parking-minor" name="approvedParking" value="minor">
              <label for="parking-minor">Minor</label>
            </div>
            <div class="radio-option">
              <input type="radio" id="parking-major" name="approvedParking" value="major">
              <label for="parking-major">Major</label>
            </div>
            <div class="radio-option">
              <input type="radio" id="parking-na" name="approvedParking" value="na">
              <label for="parking-na">N/A</label>
            </div>
          </div>
        </div>
      </div>

      <!-- Detailed Comments -->
      <div class="form-section">
        <h2 class="section-title">Detailed Comments / Violation Specifics</h2>
        <div class="question">
          <label class="question-label">Include specific locations, measurements, or descriptions as needed</label>
          <textarea name="detailedComments" placeholder="Enter detailed comments here..."></textarea>
        </div>
      </div>

      <!-- Follow-up Actions -->
      <div class="form-section">
        <h2 class="section-title">Follow-up Actions</h2>

        <div class="question">
          <label class="question-label">Violation Notice Sent?</label>
          <div class="radio-group">
            <div class="radio-option">
              <input type="radio" id="notice-yes" name="violationNotice" value="yes">
              <label for="notice-yes">Yes</label>
            </div>
            <div class="radio-option">
              <input type="radio" id="notice-no" name="violationNotice" value="no">
              <label for="notice-no">No</label>
            </div>
          </div>
        </div>

        <div class="question">
          <label class="question-label">Violation Notice Date (if applicable)</label>
          <input type="date" name="violationNoticeDate">
        </div>

        <div class="question">
          <label class="question-label">Compliance Deadline</label>
          <input type="date" name="complianceDeadline">
        </div>

        <div class="question">
          <label class="question-label">Re-inspection Date</label>
          <input type="date" name="reinspectionDate">
        </div>

        <div class="question">
          <label class="question-label">Compliance Status</label>
          <div class="radio-group">
            <div class="radio-option">
              <input type="radio" id="status-resolved" name="complianceStatus" value="resolved">
              <label for="status-resolved">Resolved</label>
            </div>
            <div class="radio-option">
              <input type="radio" id="status-progress" name="complianceStatus" value="in-progress">
              <label for="status-progress">In Progress</label>
            </div>
            <div class="radio-option">
              <input type="radio" id="status-action" name="complianceStatus" value="further-action">
              <label for="status-action">Further Action Required</label>
            </div>
          </div>
        </div>
      </div>

      <!-- Submit Button -->
      <div class="form-section">
        <button class="submit-btn" type="submit" id="submitBtn">Submit</button>
      </div>
    </form>
  </div>
</div>

<!-- Firebase SDK -->
<script type="module">
  // Import the functions you need from the SDKs you need
  import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js';
  import { getFirestore, collection, addDoc } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js';
  import { getAuth, signInWithEmailAndPassword, signInWithPopup, GoogleAuthProvider, onAuthStateChanged, signOut } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js';
  import { getStorage, ref, uploadBytesResumable, getDownloadURL } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-storage.js';

  // TODO: Replace with your Firebase configuration
  const firebaseConfig = {
    apiKey: "AIzaSyAxwLLF5FNw2u7qtYe8YigXgVpD1rkufk8",
    authDomain: "sunrise-ccr-compliance.firebaseapp.com",
    projectId: "sunrise-ccr-compliance",
    storageBucket: "sunrise-ccr-compliance.firebasestorage.app",
    messagingSenderId: "609348961099",
    appId: "1:609348961099:web:ef08e0b3053e0ec1415ece"
  };

  // Initialize Firebase
  const app = initializeApp(firebaseConfig);
  const db = getFirestore(app);
  const auth = getAuth(app);
  const storage = getStorage(app);
  const googleProvider = new GoogleAuthProvider();

  // DOM elements
  const authContainer = document.getElementById('authContainer');
  const formContainer = document.getElementById('formContainer');
  const form = document.getElementById('complianceForm');
  const submitBtn = document.getElementById('submitBtn');
  const successMessage = document.getElementById('successMessage');
  const errorMessage = document.getElementById('errorMessage');

  // Auth elements
  const signInEmail = document.getElementById('signInEmail');
  const signInPassword = document.getElementById('signInPassword');
  const signInBtn = document.getElementById('signInBtn');
  const googleSignInBtn = document.getElementById('googleSignInBtn');
  const signOutBtn = document.getElementById('signOutBtn');
  const userEmail = document.getElementById('userEmail');

  // Image upload elements
  const fileUploadArea = document.getElementById('fileUploadArea');
  const fileInput = document.getElementById('fileInput');
  const imagePreviewContainer = document.getElementById('imagePreviewContainer');
  const uploadProgress = document.getElementById('uploadProgress');
  const uploadProgressText = document.getElementById('uploadProgressText');
  const uploadProgressFill = document.getElementById('uploadProgressFill');

  let selectedFiles = [];
  let uploadedImageUrls = [];

  // File upload handlers
  fileUploadArea.addEventListener('click', () => fileInput.click());

  fileInput.addEventListener('change', (e) => handleFiles(e.target.files));

  // Drag and drop
  fileUploadArea.addEventListener('dragover', (e) => {
    e.preventDefault();
    fileUploadArea.classList.add('dragover');
  });

  fileUploadArea.addEventListener('dragleave', () => {
    fileUploadArea.classList.remove('dragover');
  });

  fileUploadArea.addEventListener('drop', (e) => {
    e.preventDefault();
    fileUploadArea.classList.remove('dragover');
    handleFiles(e.dataTransfer.files);
  });

  function handleFiles(files) {
    const maxFiles = 10;
    const maxSize = 10 * 1024 * 1024; // 10MB

    const fileArray = Array.from(files);

    // Filter for images only
    const imageFiles = fileArray.filter(file => file.type.startsWith('image/'));

    // Check total number of files
    if (selectedFiles.length + imageFiles.length > maxFiles) {
      showError(`Maximum ${maxFiles} images allowed`);
      return;
    }

    // Check file sizes
    const oversizedFiles = imageFiles.filter(file => file.size > maxSize);
    if (oversizedFiles.length > 0) {
      showError('Some files are too large. Maximum size is 10MB per image.');
      return;
    }

    // Add new files
    imageFiles.forEach(file => {
      selectedFiles.push(file);
      displayImagePreview(file);
    });
  }

  function displayImagePreview(file) {
    const reader = new FileReader();

    reader.onload = (e) => {
      const previewDiv = document.createElement('div');
      previewDiv.className = 'image-preview';
      previewDiv.dataset.filename = file.name;

      const img = document.createElement('img');
      img.src = e.target.result;

      const removeBtn = document.createElement('button');
      removeBtn.className = 'image-preview-remove';
      removeBtn.innerHTML = '×';
      removeBtn.type = 'button';
      removeBtn.onclick = () => removeImage(file.name);

      previewDiv.appendChild(img);
      previewDiv.appendChild(removeBtn);
      imagePreviewContainer.appendChild(previewDiv);
    };

    reader.readAsDataURL(file);
  }

  function removeImage(filename) {
    selectedFiles = selectedFiles.filter(file => file.name !== filename);
    const preview = imagePreviewContainer.querySelector(`[data-filename="${filename}"]`);
    if (preview) preview.remove();
  }

  async function uploadImages() {
    if (selectedFiles.length === 0) {
      return [];
    }

    uploadProgress.style.display = 'block';
    const urls = [];

    for (let i = 0; i < selectedFiles.length; i++) {
      const file = selectedFiles[i];
      const filename = `compliance-photos/${Date.now()}-${file.name}`;
      const storageRef = ref(storage, filename);

      uploadProgressText.textContent = `Uploading image ${i + 1} of ${selectedFiles.length}...`;

      try {
        const uploadTask = uploadBytesResumable(storageRef, file);

        const url = await new Promise((resolve, reject) => {
          uploadTask.on('state_changed',
            (snapshot) => {
              const progress = (snapshot.bytesTransferred / snapshot.totalBytes) * 100;
              const overallProgress = ((i + (progress / 100)) / selectedFiles.length) * 100;
              uploadProgressFill.style.width = overallProgress + '%';
            },
            (error) => {
              console.error('Upload error:', error);
              reject(error);
            },
            async () => {
              const downloadURL = await getDownloadURL(uploadTask.snapshot.ref);
              resolve(downloadURL);
            }
          );
        });

        urls.push(url);
      } catch (error) {
        console.error('Error uploading file:', file.name, error);
        throw error;
      }
    }

    uploadProgress.style.display = 'none';
    return urls;
  }

  // Check authentication state
  onAuthStateChanged(auth, (user) => {
    if (user) {
      // User is signed in
      authContainer.style.display = 'none';
      formContainer.style.display = 'block';
      userEmail.textContent = user.email;
    } else {
      // User is signed out
      authContainer.style.display = 'block';
      formContainer.style.display = 'none';
    }
  });

  // Email/Password Sign In
  signInBtn.addEventListener('click', async () => {
    const email = signInEmail.value;
    const password = signInPassword.value;

    if (!email || !password) {
      showError('Please enter both email and password');
      return;
    }

    signInBtn.disabled = true;
    signInBtn.textContent = 'Signing In...';

    try {
      await signInWithEmailAndPassword(auth, email, password);
    } catch (error) {
      console.error('Sign in error:', error);
      let errorMsg = 'Sign in failed. ';

      switch (error.code) {
        case 'auth/user-not-found':
        case 'auth/wrong-password':
          errorMsg += 'Invalid email or password.';
          break;
        case 'auth/invalid-email':
          errorMsg += 'Invalid email format.';
          break;
        case 'auth/too-many-requests':
          errorMsg += 'Too many failed attempts. Try again later.';
          break;
        default:
          errorMsg += error.message;
      }

      showError(errorMsg);
    } finally {
      signInBtn.disabled = false;
      signInBtn.textContent = 'Sign In';
    }
  });

  // Google Sign In
  googleSignInBtn.addEventListener('click', async () => {
    googleSignInBtn.disabled = true;
    googleSignInBtn.textContent = 'Signing In...';

    try {
      await signInWithPopup(auth, googleProvider);
    } catch (error) {
      console.error('Google sign in error:', error);
      let errorMsg = 'Google sign in failed. ';

      if (error.code === 'auth/popup-closed-by-user') {
        errorMsg += 'Sign in cancelled.';
      } else if (error.code === 'auth/unauthorized-domain') {
        errorMsg += 'This domain is not authorized. Please add it in Firebase Console → Authentication → Settings → Authorized domains.';
      } else {
        errorMsg += error.message;
      }

      showError(errorMsg);
    } finally {
      googleSignInBtn.disabled = false;
      googleSignInBtn.innerHTML = `
                    <svg width="18" height="18" style="vertical-align: middle; margin-right: 8px;" viewBox="0 0 24 24">
                        <path fill="#4285F4" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"/>
                        <path fill="#34A853" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"/>
                        <path fill="#FBBC05" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"/>
                        <path fill="#EA4335" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"/>
                    </svg>
                    Sign in with Google
                `;
    }
  });

  // Sign Out
  signOutBtn.addEventListener('click', async () => {
    try {
      await signOut(auth);
      signInEmail.value = '';
      signInPassword.value = '';

      // Clear image uploads
      selectedFiles = [];
      uploadedImageUrls = [];
      imagePreviewContainer.innerHTML = '';
    } catch (error) {
      console.error('Sign out error:', error);
      showError('Sign out failed: ' + error.message);
    }
  });

  // Form submission handler
  form.addEventListener('submit', async (e) => {
    e.preventDefault();

    // Check if user is authenticated
    if (!auth.currentUser) {
      showError('You must be signed in to submit the form');
      return;
    }

    // Disable submit button
    submitBtn.disabled = true;
    submitBtn.textContent = 'Uploading Images...';

    // Hide previous messages
    successMessage.style.display = 'none';
    errorMessage.style.display = 'none';

    try {
      // Upload images first
      const imageUrls = await uploadImages();

      submitBtn.textContent = 'Submitting Form...';

      // Collect form data
      const formData = new FormData(form);
      const data = {};

      for (let [key, value] of formData.entries()) {
        data[key] = value;
      }

      // Add metadata
      data.submittedAt = new Date().toISOString();
      data.submittedBy = auth.currentUser.email;
      data.images = imageUrls;
      data.imageCount = imageUrls.length;

      // Add document to Firestore
      const docRef = await addDoc(collection(db, "complianceReviews"), data);
      console.log("Document written with ID: ", docRef.id);

      // Show success message
      successMessage.style.display = 'block';

      // Reset form
      form.reset();
      selectedFiles = [];
      uploadedImageUrls = [];
      imagePreviewContainer.innerHTML = '';
      fileInput.value = '';

      // Scroll to top to show success message
      window.scrollTo({ top: 0, behavior: 'smooth' });

      // Hide success message after 5 seconds
      setTimeout(() => {
        successMessage.style.display = 'none';
      }, 5000);

    } catch (error) {
      console.error("Error submitting form: ", error);
      showError('Error submitting form: ' + error.message);
    } finally {
      // Re-enable submit button
      submitBtn.disabled = false;
      submitBtn.textContent = 'Submit';
    }
  });

  // Helper function to show error message
  function showError(message) {
    errorMessage.textContent = message;
    errorMessage.style.display = 'block';
    window.scrollTo({ top: 0, behavior: 'smooth' });

    setTimeout(() => {
      errorMessage.style.display = 'none';
    }, 5000);
  }

  // Allow Enter key to submit sign in
  signInPassword.addEventListener('keypress', (e) => {
    if (e.key === 'Enter') {
      signInBtn.click();
    }
  });
</script>
</body>
</html>
